\documentclass[10pt]{article}
\usepackage[margin=1cm, bottom=2cm]{geometry}
\usepackage{tikz}
\usepackage[urlcolor=blue, colorlinks=true]{hyperref}
\usepackage{longtable}
\usepackage{multirow}

\begin{document}

\title{Report\\Assignment 1: The Matrix Universe}
\author{Timur Usmanov, B23-ISE-01}
\date{October 29, 2024}
\maketitle

\section*{Introduction}
Find the complete source code and tests at \url{https://github.com/Error10556/IntroToAI1}.

\section{PEAS Description}

In this problem, the Actor has to find the smallest number of moves required to reach the destination cell.

\begin{enumerate}
	\item The Actor's performance measures, in order of priority, are:
	\begin{enumerate}
		\item The Actor survives;
		\item The Actor gives the correct answer;
		\item The Actor spends as few moves as possible until he can give an answer.
	\end{enumerate}
	
	\item The Actor's environment is a grid of $9\times 9$ cells, where each cell might contain an Agent, a Sentinel, the Backdoor key, or the Keymaker. This environment is:
	
	\begin{enumerate}
		\item \textbf{Partially observable}, because Neo only sees in a Moore neighborhood of range 1 or 2;
		\item \textbf{Multi-agent}, because, arguably, Agents and Sentinels have to observe their environment and kill Neo, which is an action;
		\item \textbf{Deterministic}, because there are no random elements; the environment is entirely predictable;
		\item \textbf{Sequential}, because the action of picking up the key changes the environment and would require Neo to make different moves;
		\item \textbf{Static}, because the environment does not change while the Actor thinks;
		\item \textbf{Discrete}, because there is only a finite number of states of the environment;
		\item \textbf{Known}, because the rules are given in the assignment.
	\end{enumerate}
	
	\item Neo's actuators are his legs (to make moves) and hands (to pick up the Backdoor key). Formally, the actuator is the \texttt{m x y} command.
	
	\item Neo's sensors are his eyes and the Trinity, which allow him to see the objects on the map and the perceived cells. Formally, our sensor is the standard input stream.
\end{enumerate}

\section{Algorithm flow}
\subsection{A*}
In this algorithm, each known cell is associated with several values: (a) the true shortest distance $d$ from $(0, 0)$ to that cell over safe cells, (b) the Manhattan distance $m$ from that cell to the Keymaker, (c) whether the cell is \textit{safe}, \textit{dangerous}, or \textit{unknown}, (d) whether or not the cell has been visited.
We define the estimate $E(c)$ of cell $c$ as $d + m$.

Neo first observes the surroundings at cell $(0, 0)$. Then, in a cycle, the Actor does the following:\newline
Neo chooses a safe cell $c$ that is adjacent to a previously visited cell, among those~--- with the least $E(c)$, among those~--- with the least $m$, among those~--- the one closest to Neo if he has to walk on safe cells to reach it (the distance is, again, calculated via another A* algorithm). Then, Neo moves there, scanning the surroundings and updating the map. Upon reaching the cell $c$, Neo updates the values associated with the adjacent unvisited cells of $c$. Once we have set the true shortest distance $d$ of the Keymaker cell, we may break out of the cycle. If there are no unvisited cells adjacent to a visited one, we know that there is no answer.

We ignore the Backdoor key, as it ``is not an obligation" ``to utilize its advantages".

\subsection{Backtracking}
In this algorithm, each cell is associated with the shortest distance from the start to this cell. An unexplored cell is marked with distance \texttt{-1}.

Neo explores the safe and reachable portion of the map using Depth-First Search (DFS). DFS assigns distances to cells upon reaching them and does not explore already visited cells that have been previously reached with fewer moves. Moreover, the Actor does not make a move if it guarantees a dead-end, or the number of moves is already exceeding the best known answer, or the theoretical best answer has already been found. When there are no adjacent suitable cells, Neo backtracks.

Again, we ignore the Backdoor key.

\section{Statistical analysis}
\subsection{Impossible tests}
A total of $1000$ tests were generated, out of which exactly 10 have no path to the Keymaker (if we ignore the Backdoor key).

\begin{center}
\input{unsolvable}
\end{center}
\begin{flushright}
\textit{Legend:} \textbf{N}~--- Neo, \textbf{A}~--- Agent, \textbf{S}~--- Sentinel, \textbf{B}~--- Backdoor key, \textbf{K}~--- Keymaker, \tikz[baseline=0.1]{\fill[pink] (0,0) rectangle (0.3,0.3)}~--- a perceived cell.
\end{flushright}
\begin{figure}[!h]
\caption{Maps with the answer \texttt{-1}.}\label{impossibletests}
\end{figure}

\subsection{Algorithm comparison}
In the table below, a ``win'' is defined as a situation where Neo can reach the Keymaker and the program can correctly determine the shortest distance to the goal.

\begin{longtable}[c]{|c|c|c|c|c|c|}
	\hline
	\multicolumn{2}{|c|}{} & \textbf{A* (variant 1)} & \textbf{A* (variant 2)} & \textbf{Backtracking (v. 1)} & \textbf{Backtracking (v. 2)}\\
	\hline
	\endhead
	\multicolumn{6}{|c|}{...}\\ \endfoot
	\endlastfoot
	\multirow{4}{3cm}{Execution time, $\mu s$} & Mean & 1243.06 & 1259.61 & 28100.18 & 30429.94 \\\cline{2-6}
	& Mode & 1280 (7 times) & 1088 (6 times) & 1165 (3 times) & 1079 (2 times) \\\cline{2-6}
	& Median & 1201 & 1214.5 & 5561.5 & 5998 \\\cline{2-6}
	& SD & 223.19 & 241.83 & 82184.89 & 88253.63 \\\hline
	\multirow{4}{3cm}{Number of moves} & Mean & 11.35 & 11.35 & 1650.51 & 1650.49 \\\cline{2-6}
	& Mode & 9 (88 times) & 9 (88 times) & 11 (21 times) & 3 (21 times) \\\cline{2-6}
	& Median & 8 & 8 & 266 & 266 \\\cline{2-6}
	& SD & 10.73 & 10.73 & 5022.03 & 5022.03 \\\hline
	\multicolumn{2}{|c|}{Number of wins} & 990 (99\%) & 990 (99\%) & 990 (99\%) & 990 (99\%) \\\hline
	\multicolumn{2}{|c|}{Number of losses} & 10 (1\%) & 10 (1\%)  & 10 (1\%) & 10 (1\%) \\\hline
	\multicolumn{2}{|c|}{Number of executions longer than 1 sec} & 0 (0\%) & 0 (0\%) & 1 (0.1\%) & 1 (0.1\%)\\\hline
	
\end{longtable}
\begin{table}[!h]
	\caption{Statistics of algorithms side-by-side.} \label{comparison}
\end{table}

\subsection{Discussion}
\subsection{Comparison of A* variants}
Table \ref{comparison} shows a great similarity in each statistic of the two variants. However, the actual runtime of the program slightly increases as the field of view widens, although that may be a statistically insignificant increase. We may conclude that the variant of the problem has no effect on the optimality of decisions of the Actor, but it probably slows down Neo's perception.

\subsection{Comparison of Backtracking variants}


\end{document}